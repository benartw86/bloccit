<!-- #4  we use the favorite_for method we created in User. We collect the favorite it returns to use later. This nifty syntax, 
which relies on the fact that most objects are "truthy", while nil is not, allows us to both test a condition and get a return value in one line.
-->
 <% if favorite = current_user.favorite_for(post) %>
 
   <%= link_to [post, favorite], class: 'btn btn-danger', method: :delete do %>
     <i class="glyphicon glyphicon-star-empty"> </i>&nbsp; Unfavorite
   <% end %>
 <% else %>
 
   <%= link_to [post, Favorite.new], class: 'btn btn-primary', method: :post do %>
     <i class="glyphicon glyphicon-star"> </i>&nbsp; Favorite
   <% end %>
 <% end %>